###### Global ######

 #-info
 #-info_exclude null
 #-on_error_attach_debugger
 #-log_summary  # summarize the programâ€™s performance
  -malloc_dump  # dumps unfreed memory during call to PetscFinalize
 #-malloc_log   # activate logging of memory usage
 #-memory_info  # print memory usage at end of run

  -stokes_ksp_type preonly
  -stokes_pc_type none

###### BBT KSP ######

  ### KSP type

    # multigrid preconditioner
   #-bbt_ksp_type preonly

    # CG
   #-bbt_ksp_type cg
   #-bbt_ksp_cg_single_reduction  # combine both inner prod into 1 allreduce

    # GMRES
    -bbt_ksp_type gmres
    -bbt_ksp_gmres_restart 150
    -bbt_ksp_pc_side right

  ### KSP tolerances
  -bbt_ksp_rtol 1.0e-6
  -bbt_ksp_atol 0.0
  -bbt_ksp_max_it 10

  ### KSP monitoring
  -bbt_ksp_view                    # show all the options in use
  -bbt_ksp_monitor                 # show residual norm at each iteration
 #-bbt_ksp_monitor_range           # show #residual elem's >20% of max res
 #-bbt_ksp_monitor_singular_value  # show singular value est at each iter
 #-bbt_ksp_compute_eigenvalues     # show eigvals computed during Krylov iter

###### BBT PC ######

  # inner preconditioner uses the matrix that defines the linear system
  -bbt_pc_use_amat true

  ### GMG smoothing KSP

    ### KSP type

      # none
     #-stress_gmg_levels_ksp_type preonly

      # Chebyshev smoother
      -bbt_gmg_levels_ksp_type chebyshev
      -bbt_gmg_levels_ksp_chebyshev_estimate_eigenvalues
      -bbt_gmg_levels_ksp_chebyshev_estimate_eigenvalues_random
      -bbt_gmg_levels_est_ksp_type gmres
      -bbt_gmg_levels_est_ksp_max_it 10

    ### KSP tolerances
    -bbt_gmg_levels_ksp_rtol 1.0e-16
    -bbt_gmg_levels_ksp_atol 0.0
    -bbt_gmg_levels_ksp_max_it 3

    ### KSP monitoring
   #-bbt_gmg_levels_ksp_view
   #-bbt_gmg_levels_ksp_monitor
   #-bbt_gmg_levels_ksp_monitor_singular_value
   #-bbt_gmg_levels_ksp_compute_eigenvalues

  ### GMG smoothing PC

    -bbt_gmg_levels_pc_use_amat true

    ### PC type

      # Jacobi
      -bbt_gmg_levels_pc_type jacobi

      # Block jacobi (has sub solver)
     #-bbt_gmg_levels_pc_type bjacobi

    ### Sub KSP type

      # none
     #-bbt_gmg_levels_sub_ksp_type preonly

    ### Sub PC type

      # SSOR
     #-bbt_gmg_levels_sub_pc_type sor
     #-bbt_gmg_levels_sub_pc_sor_symmetric

  ### GMG coarse KSP

    # AMG preconditioner
    -bbt_gmg_coarse_ksp_type preonly

    ### KSP tolerances
    -bbt_gmg_coarse_ksp_rtol 1.0e-16
    -bbt_gmg_coarse_ksp_atol 0.0
    -bbt_gmg_coarse_ksp_max_it 1

    ### KSP monitoring
   #-bbt_gmg_coarse_ksp_view
   #-bbt_gmg_coarse_ksp_monitor
   #-bbt_gmg_coarse_ksp_monitor_singular_value
   #-bbt_gmg_coarse_ksp_compute_eigenvalues

  ### GMG coarse PC

    # inner preconditioner uses the matrix that defines the linear system
    -bbt_gmg_coarse_pc_use_amat false

    ### AMG algorithmic options
    -bbt_gmg_coarse_pc_mg_type multiplicative
    -bbt_gmg_coarse_pc_mg_multiplicative_cycles 1

    ### AMG Galerkin coarse grid generation

      # GAMG
      -bbt_gmg_coarse_pc_type gamg
      -bbt_gmg_coarse_pc_gamg_verbose 10
      -bbt_gmg_coarse_pc_gamg_threshold 0.01
      -bbt_gmg_coarse_pc_gamg_process_eq_limit 100
      -bbt_gmg_coarse_pc_gamg_coarse_eq_limit 1000
     #-bbt_gmg_coarse_pc_gamg_eigtarget
     #-bbt_gmg_coarse_pc_gamg_reuse_interpolation
     #-bbt_gmg_coarse_pc_gamg_use_agg_gasm
      -bbt_gmg_coarse_pc_gamg_agg_nsmooths 1
     #-bbt_gmg_coarse_pc_gamg_sym_graph
     #-bbt_gmg_coarse_pc_gamg_square_graph
     #-bbt_gmg_coarse_pc_gamg_repartition
     #-bbt_gmg_coarse_pc_gamg_mat_partitioning_type parmetis

    ### AMG coarse grid KSP

      ### KSP type
      -bbt_gmg_coarse_mg_coarse_ksp_type preonly  # (others don't seem to work)

      ### KSP tolerances
      -bbt_gmg_coarse_mg_coarse_ksp_max_it 1

    ### AMG coarse grid PC

      # Block Jacobi (has sub solver)
      -bbt_gmg_coarse_mg_coarse_pc_type bjacobi
      -bbt_gmg_coarse_mg_coarse_sub_ksp_type preonly
      -bbt_gmg_coarse_mg_coarse_sub_pc_type cholesky
      -bbt_gmg_coarse_mg_coarse_sub_pc_factor_shift_type positive_definite

    ### AMG smoothing KSP

      # Chebyshev smoother
      -bbt_gmg_coarse_mg_levels_ksp_type chebyshev
      -bbt_gmg_coarse_mg_levels_ksp_chebyshev_estimate_eigenvalues
      -bbt_gmg_coarse_mg_levels_ksp_chebyshev_estimate_eigenvalues_random
      -bbt_gmg_coarse_mg_levels_est_ksp_type gmres
      -bbt_gmg_coarse_mg_levels_est_ksp_max_it 10

      ### KSP tolerances
      -bbt_gmg_coarse_mg_levels_ksp_rtol 1.0e-16
      -bbt_gmg_coarse_mg_levels_ksp_atol 0.0
      -bbt_gmg_coarse_mg_levels_ksp_max_it 3

    ### AMG smoothing PC

      # Jacobi
      -bbt_gmg_coarse_mg_levels_pc_type jacobi

      # Block Jacobi (has sub solver)
     #-bbt_gmg_coarse_mg_levels_pc_type bjacobi
     #-bbt_gmg_coarse_mg_levels_sub_ksp_type preonly
     #-bbt_gmg_coarse_mg_levels_sub_pc_type icc
     #-bbt_gmg_coarse_mg_levels_sub_pc_factor_levels 0
     #-bbt_gmg_coarse_mg_levels_sub_pc_factor_in_place
     #-bbt_gmg_coarse_mg_levels_sub_pc_factor_shift_type positive_definite

